const t={name:"windy-plugin-flymet",version:"2.0.0",icon:"🪂",title:"Flymet  ",description:"Windy plugin for Flymet.",author:"Jakub Vrána",desktopUI:"embedded",mobileUI:"small",routerPath:"/flymet",built:1715158635608,builtReadable:"2024-05-08T08:57:15.608Z"},e=W.broadcast,{map:n}=W.map,o=W.store,r=W.rootScope;function a(){}function l(t){return t()}function s(){return Object.create(null)}function c(t){t.forEach(l)}function i(t){return"function"==typeof t}function p(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function u(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode&&t.parentNode.removeChild(t)}function m(t){return document.createElement(t)}function d(){return t=" ",document.createTextNode(t);var t}let y;function h(t){y=t}function g(){if(!y)throw new Error("Function called outside component initialization");return y}const $=[],b=[];let _=[];const v=[],k=Promise.resolve();let x=!1;function w(t){_.push(t)}const z=new Set;let E=0;function S(){if(0!==E)return;const t=y;do{try{for(;E<$.length;){const t=$[E];E++,h(t),D(t.$$)}}catch(t){throw $.length=0,E=0,t}for(h(null),$.length=0,E=0;b.length;)b.pop()();for(let t=0;t<_.length;t+=1){const e=_[t];z.has(e)||(z.add(e),e())}_.length=0}while($.length);for(;v.length;)v.pop()();x=!1,z.clear(),h(t)}function D(t){if(null!==t.fragment){t.update(),c(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(w)}}const O=new Set;function T(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];_.forEach((o=>-1===t.indexOf(o)?e.push(o):n.push(o))),n.forEach((t=>t())),_=e}(n.after_update),c(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function q(t,e){-1===t.$$.dirty[0]&&($.push(t),x||(x=!0,k.then(S)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function F(t,e,n,o,r,p,u=null,m=[-1]){const d=y;h(t);const g=t.$$={fragment:null,ctx:[],props:p,update:a,not_equal:r,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:s(),dirty:m,skip_bound:!1,root:e.target||d.$$.root};u&&u(g.root);let $=!1;if(g.ctx=n?n(t,e.props||{},((e,n,...o)=>{const a=o.length?o[0]:n;return g.ctx&&r(g.ctx[e],g.ctx[e]=a)&&(!g.skip_bound&&g.bound[e]&&g.bound[e](a),$&&q(t,e)),n})):[],g.update(),$=!0,c(g.before_update),g.fragment=!!o&&o(g.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);g.fragment&&g.fragment.l(t),t.forEach(f)}else g.fragment&&g.fragment.c();e.intro&&((b=t.$$.fragment)&&b.i&&(O.delete(b),b.i(_))),function(t,e,n){const{fragment:o,after_update:r}=t.$$;o&&o.m(e,n),w((()=>{const e=t.$$.on_mount.map(l).filter(i);t.$$.on_destroy?t.$$.on_destroy.push(...e):c(e),t.$$.on_mount=[]})),r.forEach(w)}(t,e.target,e.anchor),S()}var b,_;h(d)}class M{$$=void 0;$$set=void 0;$destroy(){T(this,1),this.$destroy=a}$on(t,e){if(!i(e))return a;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function N(t){let e,n,o,r,l;return{c(){var t,a,s,c;e=m("ul"),e.innerHTML='<li><a data-flymet="">Flymet: nic</a></li> <li><a data-flymet="cudf" style="font-weight: bold;">Deficit konvektivní teploty</a> <a href="https://flymet.meteopress.cz/manual.php#popis21" target="_blank"><sup>?</sup></a></li> <li><a data-flymet="cukh">Kupovitá oblačnost</a> <a href="https://flymet.meteopress.cz/manual.php#popis22" target="_blank"><sup>?</sup></a></li> <li><a data-flymet="cuvr">Rychlost stoupání</a> <a href="https://flymet.meteopress.cz/manual.php#popis2" target="_blank"><sup>?</sup></a></li> <li><a data-flymet="curya">Stoupání 1000 m</a> <a href="https://flymet.meteopress.cz/manual.php#popis27" target="_blank"><sup>?</sup></a></li> <li><a data-flymet="curyb">Stoupání 1500 m</a> <a href="https://flymet.meteopress.cz/manual.php#popis27" target="_blank"><sup>?</sup></a></li> <li><a data-flymet="drtr">Druh termiky</a></li>',n=d(),o=m("p"),o.innerHTML='Neprůhlednost: <input id="flymet-opacity" type="range" min="0" max="100" value="50" style="vertical-align: text-bottom;"/>',r=d(),l=m("p"),l.innerHTML='Zdroj dat: <a href="https://flymet.meteopress.cz/cr/" target="_blank">Flymet</a>',t=e,a="padding-left",null==(s="20px")?t.style.removeProperty(a):t.style.setProperty(a,s,c?"important":"")},m(t,a){u(t,e,a),u(t,n,a),u(t,o,a),u(t,r,a),u(t,l,a)},p:a,i:a,o:a,d(t){t&&(f(e),f(n),f(o),f(r),f(l))}}}function U(t){return t.setDate(t.getDate()+1),t}function j(t,e){return t.getDate()==e.getDate()}function H(t,a,l){let s,c,i="cudf";function p(){const t=new Date(o.get("timestamp")),e=new Date,r=t.getUTCHours();let a="",l="";if(i){const n=i.replace(/^cury/,"ecury");j(t,e)&&r>0?(a="https://flymet.meteopress.cz/cr/"+i+r+".png","cuvr"!=n&&"drtr"!=n&&(l="https://flymet.meteopress.cz/sk/"+n+r+".png")):j(t,U(e))?(a="https://flymet.meteopress.cz/cr"+(r?"dl/"+i+r:"/"+i+"24")+".png",n!=i&&(l="https://flymet.meteopress.cz/sk"+(r?"dl/"+n+r:"/"+n+"24")+".png")):j(t,U(e))&&r<20&&(a="https://flymet.meteopress.cz/crdl"+(r?"1/"+i+r:"/"+i+"24")+".png")}a?s.setUrl(l?"https://pg.vrana.cz/flymet/cz.php?url="+a:a).addTo(n):s.remove(),l?c.setUrl("https://pg.vrana.cz/flymet/sk.php?url="+l).addTo(n):c.remove()}var u;return u=()=>{Array.from(document.querySelectorAll("[data-flymet]")).forEach((t=>t.onclick=t=>{document.querySelector('[data-flymet="'+i+'"]').style.fontWeight="normal",t.target.style.fontWeight="bold",i=t.target.dataset.flymet,p(),r.isMobile&&e.fire("rqstClose","windy-plugin-flymet")})),document.querySelector("#flymet-opacity").oninput=function(t){s.setOpacity(t.target.value/100),c.setOpacity(t.target.value/100)}},g().$$.on_mount.push(u),function(t){g().$$.on_destroy.push(t)}((()=>{i="",p()})),[()=>{if(!s){const t=document.getElementById("open-in-app");t&&(t.style.display="none"),s=L.imageOverlay("https://flymet.meteopress.cz/cr/cudf13.png",[[48,11.65],[51.65,19.35]],{opacity:.5}),c=L.imageOverlay("https://flymet.meteopress.cz/sk/cudf13.png",[[47.1,16.5],[50.145,22.9]],{opacity:.5}),p(),o.on("timestamp",p)}}]}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");class P extends M{constructor(t){super(),F(this,t,H,N,p,{onopen:0})}get onopen(){return this.$$.ctx[0]}}export{t as __pluginConfig,P as default};
